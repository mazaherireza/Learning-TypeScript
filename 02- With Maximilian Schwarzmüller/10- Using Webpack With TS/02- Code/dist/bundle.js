(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}const t=function(e,t,n){const{value:r}=n;return{configurable:!0,get(){return r.bind(this)}}};function n(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}class r{constructor(e,t,n){this.title=e,this.description=t,this.status=n}}var s;!function(e){e.Is_Doing="IS_DOING",e.Done="DONE"}(s||(s={}));class i{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class o extends i{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new o),this.instance}addProject(e,t){const n=new r(e,t,s.Is_Doing);this.projects.push(n),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.title==e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e([...this.projects])}}console.log("EXPORTED!");const l=o.getInstance();class a extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleElement=this.element.querySelector("#title"),this.descriptionElement=this.element.querySelector("#description"),this.formElement=document.querySelector("form"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}clearForm(){this.formElement.reset()}gatherUserInput(){const e=this.titleElement.value,t=this.descriptionElement.value,r={value:t,required:!1,minLength:8,maxLength:800};return n({value:e,required:!0,minLength:8,maxLength:80})&&n(r)?[e,t]:void 0}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n]=t;l.addProject(e,n)}console.log(this.titleElement.value),this.clearForm()}}!function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([t],a.prototype,"configure",null);class c extends e{constructor(e,t){super("single-project",e,!1),this.project=t,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.title),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler),this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.project.description}renderContent(){}}!function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([t],c.prototype,"dragStartHandler",null);var d=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class u extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"==e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer.getData("text/plain");l.moveProject(t,this.type==s.Done?s.Is_Doing:s.Done)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("drop",this.dropHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),l.addListener((e=>{const t=e.filter((e=>this.type==s.Done?e.status==s.Done:e.status==s.Is_Doing));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" Projects  "}renderProjects(){document.querySelector(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new c(this.element.querySelector("ul").id,e)}}d([t],u.prototype,"dragOverHandler",null),d([t],u.prototype,"dropHandler",null),d([t],u.prototype,"dragLeaveHandler",null),new a,new u(s.Is_Doing)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFBTyxNQUFlQSxFQUtwQixXQUFBQyxDQUNFQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBQyxLQUFLQyxnQkFBa0JDLFNBQVNDLGVBQzlCUCxHQUdGSSxLQUFLSSxZQUFjRixTQUFTQyxlQUFlTixHQUMzQyxNQUFNUSxFQUFlSCxTQUFTSSxXQUM1Qk4sS0FBS0MsZ0JBQWdCTSxTQUNyQixHQUVGUCxLQUFLUSxRQUFVSCxFQUFhSSxrQkFDeEJWLElBQWNDLEtBQUtRLFFBQVFFLEdBQUtYLEdBRXBDQyxLQUFLVyxPQUFPYixFQUNkLENBRUEsTUFBQWEsQ0FBT2IsR0FDTEUsS0FBS0ksWUFBWVEsc0JBQ2ZkLEVBQWdCLGFBQWUsWUFDL0JFLEtBQUtRLFFBRVQsRUMvQkssTUFBTUssRUFBVyxTQUN0QkMsRUFDQUMsRUFDQUMsR0FFQSxNQUFRQyxNQUFPQyxHQUFtQkYsRUFRbEMsTUFQK0MsQ0FDN0NHLGNBQWMsRUFDZCxHQUFBQyxHQUVFLE9BRGdCRixFQUFlRyxLQUFLckIsS0FFdEMsRUFHSixFQ1pPLFNBQVNzQixFQUFTQyxHQUN2QixJQUFJQyxHQUFVLEVBV2QsT0FWSUQsRUFBTUUsV0FDUkQsRUFBVUEsR0FBb0QsSUFBekNELEVBQU1OLE1BQU1TLFdBQVdDLE9BQU9DLFFBQzlCLE1BQW5CTCxFQUFNTSxXQUEyQyxpQkFBZk4sRUFBTU4sUUFDMUNPLEVBQVVBLEdBQVdELEVBQU1OLE1BQU1XLFFBQVVMLEVBQU1NLFdBQzVCLE1BQW5CTixFQUFNTyxXQUEyQyxpQkFBZlAsRUFBTU4sUUFDMUNPLEVBQVVBLEdBQVdELEVBQU1OLE1BQU1XLFFBQVVMLEVBQU1PLFdBQ2xDLE1BQWJQLEVBQU1RLEtBQXFDLGlCQUFmUixFQUFNTixRQUNwQ08sRUFBVUEsR0FBV0QsRUFBTU4sT0FBU00sRUFBTVEsS0FDM0IsTUFBYlIsRUFBTVMsS0FBcUMsaUJBQWZULEVBQU1OLFFBQ3BDTyxFQUFVQSxHQUFXRCxFQUFNTixPQUFTTSxFQUFNUyxLQUNyQ1IsQ0FDVCxDQ2JPLE1BQU1TLEVBQ1gsV0FBQXRDLENBQ1N1QyxFQUNBQyxFQUNBQyxHQUZBLEtBQUFGLE1BQUFBLEVBQ0EsS0FBQUMsWUFBQUEsRUFDQSxLQUFBQyxPQUFBQSxDQUNOLEVDUEwsSUFBWUMsR0FBWixTQUFZQSxHQUNWLHNCQUNBLGFBQ0QsQ0FIRCxDQUFZQSxJQUFBQSxFQUFNLEtDS2xCLE1BQU1DLEVBRUosV0FBQTNDLEdBRFUsS0FBQTRDLFVBQTJCLEVBQ3RCLENBQ2YsV0FBQUMsQ0FBWUMsR0FDVnpDLEtBQUt1QyxVQUFVRyxLQUFLRCxFQUN0QixFQUdLLE1BQU1FLFVBQWNMLEVBR3pCLGNBQ0VNLFFBSE0sS0FBQUMsU0FBc0IsRUFJOUIsQ0FFQSxrQkFBT0MsR0FDTCxPQUFJOUMsS0FBSytDLFdBQ1QvQyxLQUFLK0MsU0FBVyxJQUFJSixHQURNM0MsS0FBSytDLFFBR2pDLENBRUEsVUFBQUMsQ0FBV2QsRUFBZUMsR0FDeEIsTUFBTWMsRUFBVSxJQUFJaEIsRUFBUUMsRUFBT0MsRUFBYUUsRUFBT2EsVUFDdkRsRCxLQUFLNkMsU0FBU0gsS0FBS08sR0FFbkJqRCxLQUFLbUQsaUJBQ1AsQ0FFQSxXQUFBQyxDQUFZbEIsRUFBZW1CLEdBQ3pCLE1BQU1KLEVBQVVqRCxLQUFLNkMsU0FBU1MsTUFBTUwsR0FBWUEsRUFBUWYsT0FBU0EsSUFDN0RlLEdBQVdBLEVBQVFiLFNBQVdpQixJQUNoQ0osRUFBUWIsT0FBU2lCLEVBQ2pCckQsS0FBS21ELGtCQUVULENBRVEsZUFBQUEsR0FDTixJQUFLLE1BQU1JLEtBQVl2RCxLQUFLdUMsVUFBV2dCLEVBQVMsSUFBSXZELEtBQUs2QyxVQUMzRCxFQUdGVyxRQUFRQyxJQUFJLGFBQ0wsTUFBTUMsRUFBUWYsRUFBTUcsY0N2QnBCLE1BQU1hLFVBQXFCakUsRUFLaEMsV0FBQUMsR0FDRWlELE1BQU0sZ0JBQWlCLE9BQU8sRUFBTSxjQUNwQzVDLEtBQUs0RCxhQUFlNUQsS0FBS1EsUUFBUXFELGNBQy9CLFVBR0Y3RCxLQUFLOEQsbUJBQXFCOUQsS0FBS1EsUUFBUXFELGNBQ3JDLGdCQUVGN0QsS0FBSytELFlBQWM3RCxTQUFTMkQsY0FBYyxRQUMxQzdELEtBQUtnRSxXQUNQLENBR0EsU0FBQUEsR0FDRWhFLEtBQUtRLFFBQVF5RCxpQkFBaUIsU0FBVWpFLEtBQUtrRSxjQUMvQyxDQUVBLGFBQUFDLEdBQWlCLENBRVQsU0FBQUMsR0FDTnBFLEtBQUsrRCxZQUFZTSxPQUNuQixDQUVRLGVBQUFDLEdBQ04sTUFBTXBDLEVBQVFsQyxLQUFLNEQsYUFBYTNDLE1BQzFCa0IsRUFBY25DLEtBQUs4RCxtQkFBbUI3QyxNQVN0Q3NELEVBQXNDLENBQzFDdEQsTUFBT2tCLEVBQ1BWLFVBQVUsRUFDVkksVUFBVyxFQUNYQyxVQUFXLEtBR2IsT0FBSVIsRUFka0MsQ0FDcENMLE1BQU9pQixFQUNQVCxVQUFVLEVBQ1ZJLFVBQVcsRUFDWEMsVUFBVyxNQVVxQlIsRUFBU2lELEdBQ2xDLENBQUNyQyxFQUFPQyxRQUNaLENBQ1AsQ0FFUSxhQUFBK0IsQ0FBY00sR0FDcEJBLEVBQU1DLGlCQUNOLE1BQU1sRCxFQUFRdkIsS0FBS3NFLGtCQUNuQixHQUFJSSxNQUFNQyxRQUFRcEQsR0FBUSxDQUN4QixNQUFPVyxFQUFPQyxHQUFlWixFQUM3Qm1DLEVBQU1WLFdBQVdkLEVBQU9DLEVBQzFCLENBQ0FxQixRQUFRQyxJQUFJekQsS0FBSzRELGFBQWEzQyxPQUM5QmpCLEtBQUtvRSxXQUNQLEcsMFRBMUNBLEVBREN2RCxHLDhCQ3JDSSxNQUFNK0QsVUFDSGxGLEVBSVIsV0FBQUMsQ0FBWWtGLEVBQWdCNUIsR0FDMUJMLE1BQU0saUJBQWtCaUMsR0FBUSxHQUNoQzdFLEtBQUtpRCxRQUFVQSxFQUNmakQsS0FBS2dFLFlBQ0xoRSxLQUFLbUUsZUFDUCxDQUVBLGdCQUFBVyxDQUFpQk4sR0FDZkEsRUFBTU8sYUFBY0MsUUFBUSxhQUFjaEYsS0FBS2lELFFBQVFmLE9BRXZEc0MsRUFBTU8sYUFBY0UsY0FBZ0IsTUFDdEMsQ0FFQSxjQUFBQyxDQUFlQyxHQUFlLENBRTlCLFNBQUFuQixHQUNFaEUsS0FBS1EsUUFBUXlELGlCQUFpQixZQUFhakUsS0FBSzhFLGtCQUNoRDlFLEtBQUtRLFFBQVF5RCxpQkFBaUIsVUFBV2pFLEtBQUtrRixnQkFDOUNsRixLQUFLUSxRQUFRcUQsY0FBYyxNQUFPdUIsWUFBY3BGLEtBQUtpRCxRQUFRZixNQUM3RGxDLEtBQUtRLFFBQVFxRCxjQUFjLE1BQU91QixZQUFjcEYsS0FBS2lELFFBQVFkLFdBQy9ELENBRUEsYUFBQWdDLEdBQWlCLEcsMFRBZmpCLEVBREN0RCxHLCtXQ1JJLE1BQU13RSxVQUNIM0YsRUFLUixXQUFBQyxDQUFvQjJGLEdBQ2xCMUMsTUFBTSxlQUFnQixPQUFPLEVBQU8sR0FBRzBDLGNBRHJCLEtBQUFBLEtBQUFBLEVBRWxCdEYsS0FBS3VGLGlCQUFtQixHQUN4QnZGLEtBQUtnRSxZQUNMaEUsS0FBS21FLGVBQ1AsQ0FFQSxlQUFBcUIsQ0FBZ0JoQixHQUNWQSxFQUFNTyxjQUErQyxjQUEvQlAsRUFBTU8sYUFBYVUsTUFBTSxLQUNqRGpCLEVBQU1DLGlCQUNjekUsS0FBS1EsUUFBUXFELGNBQWMsTUFDbkM2QixVQUFVQyxJQUFJLGFBRTlCLENBRUEsV0FBQUMsQ0FBWXBCLEdBQ1YsTUFBTXRDLEVBQVFzQyxFQUFNTyxhQUFjYyxRQUFRLGNBQzFDbkMsRUFBTU4sWUFDSmxCLEVBQ0FsQyxLQUFLc0YsTUFBUWpELEVBQU95RCxLQUFPekQsRUFBT2EsU0FBV2IsRUFBT3lELEtBRXhELENBR0EsZ0JBQUFDLENBQWlCWixHQUNLbkYsS0FBS1EsUUFBUXFELGNBQWMsTUFDbkM2QixVQUFVTSxPQUFPLFlBQy9CLENBRUEsU0FBQWhDLEdBQ0VoRSxLQUFLUSxRQUFReUQsaUJBQWlCLFdBQVlqRSxLQUFLd0YsaUJBQy9DeEYsS0FBS1EsUUFBUXlELGlCQUFpQixPQUFRakUsS0FBSzRGLGFBQzNDNUYsS0FBS1EsUUFBUXlELGlCQUFpQixZQUFhakUsS0FBSytGLGtCQUVoRHJDLEVBQU1sQixhQUFhSyxJQUNqQixNQUFNb0QsRUFBbUJwRCxFQUFTcUQsUUFBUWpELEdBQ3BDakQsS0FBS3NGLE1BQVFqRCxFQUFPeUQsS0FBYTdDLEVBQVFiLFFBQVVDLEVBQU95RCxLQUNsRDdDLEVBQVFiLFFBQVVDLEVBQU9hLFdBRXZDbEQsS0FBS3VGLGlCQUFtQlUsRUFDeEJqRyxLQUFLbUcsZ0JBQWdCLEdBRXpCLENBRUEsYUFBQWhDLEdBQ0UsTUFBTWlDLEVBQVMsR0FBR3BHLEtBQUtzRixxQkFDdkJ0RixLQUFLUSxRQUFRcUQsY0FBYyxNQUFPbkQsR0FBSzBGLEVBQ3ZDcEcsS0FBS1EsUUFBUXFELGNBQWMsTUFBT3VCLFlBQ2hDcEYsS0FBS3NGLEtBQUtlLGNBQWdCLGFBQzlCLENBRVEsY0FBQUYsR0FDWWpHLFNBQVMyRCxjQUN6QixHQUFHN0QsS0FBS3NGLHNCQUVBZ0IsVUFBWSxHQUN0QixJQUFLLE1BQU1DLEtBQWV2RyxLQUFLdUYsaUJBQzdCLElBQUlYLEVBQVk1RSxLQUFLUSxRQUFRcUQsY0FBYyxNQUFPbkQsR0FBSTZGLEVBRTFELEVBcERBLEdBREMxRixHLG9DQVNELEdBRENBLEcsZ0NBVUQsR0FEQ0EsRyxxQ0NqQ0gsSUFBSThDLEVBQ0osSUFBSTBCLEVBQVloRCxFQUFPYSxTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVhcm5pbmctdHMvLi9zcmMvY29tcG9uZW50cy9jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vbGVhcm5pbmctdHMvLi9zcmMvZGVjb3JhdG9ycy9hdXRvYmluZC50cyIsIndlYnBhY2s6Ly9sZWFybmluZy10cy8uL3NyYy91dGlscy92YWxpZGF0aW9uLnRzIiwid2VicGFjazovL2xlYXJuaW5nLXRzLy4vc3JjL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovL2xlYXJuaW5nLXRzLy4vc3JjL21vZGVscy9zdGF0dXMudHMiLCJ3ZWJwYWNrOi8vbGVhcm5pbmctdHMvLi9zcmMvc3RhdGUudHMiLCJ3ZWJwYWNrOi8vbGVhcm5pbmctdHMvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWlucHV0LnRzIiwid2VicGFjazovL2xlYXJuaW5nLXRzLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pdGVtLnRzIiwid2VicGFjazovL2xlYXJuaW5nLXRzLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL2xlYXJuaW5nLXRzLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnQ8VCBleHRlbmRzIEhUTUxFbGVtZW50LCBVIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IHtcclxuICB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgaG9zdEVsZW1lbnQ6IFQ7XHJcbiAgZWxlbWVudDogVTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB0ZW1wbGF0ZUlkOiBzdHJpbmcsXHJcbiAgICBob3N0RWxlbWVudElkOiBzdHJpbmcsXHJcbiAgICBpbnNlcnRBdFN0YXJ0OiBib29sZWFuLFxyXG4gICAgbmV3RWxlbWVudElkPzogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgICB0ZW1wbGF0ZUlkXHJcbiAgICApISBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cclxuICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChob3N0RWxlbWVudElkKSEgYXMgVDtcclxuICAgIGNvbnN0IGltcG9ydGVkTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUoXHJcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsXHJcbiAgICAgIHRydWVcclxuICAgICk7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBpbXBvcnRlZE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVTtcclxuICAgIGlmIChuZXdFbGVtZW50SWQpIHRoaXMuZWxlbWVudC5pZCA9IG5ld0VsZW1lbnRJZDtcclxuXHJcbiAgICB0aGlzLmF0dGFjaChpbnNlcnRBdFN0YXJ0KTtcclxuICB9XHJcblxyXG4gIGF0dGFjaChpbnNlcnRBdFN0YXJ0OiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmhvc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcclxuICAgICAgaW5zZXJ0QXRTdGFydCA/IFwiYWZ0ZXJiZWdpblwiIDogXCJiZWZvcmVlbmRcIixcclxuICAgICAgdGhpcy5lbGVtZW50XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcbiAgYWJzdHJhY3QgcmVuZGVyQ29udGVudCgpOiB2b2lkO1xyXG59XHJcbiIsImV4cG9ydCBjb25zdCBBdXRvQmluZCA9IGZ1bmN0aW9uIChcclxuICBfMTogYW55LFxyXG4gIF8yOiBzdHJpbmcsXHJcbiAgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yXHJcbikge1xyXG4gIGNvbnN0IHsgdmFsdWU6IG9yaWdpbmFsTWV0aG9kIH0gPSBkZXNjcmlwdG9yO1xyXG4gIGNvbnN0IGFkanVzdGVkRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgZ2V0KCkge1xyXG4gICAgICBjb25zdCBib3VuZEZuID0gb3JpZ2luYWxNZXRob2QuYmluZCh0aGlzKTtcclxuICAgICAgcmV0dXJuIGJvdW5kRm47XHJcbiAgICB9LFxyXG4gIH07XHJcbiAgcmV0dXJuIGFkanVzdGVkRGVzY3JpcHRvcjtcclxufTtcclxuIiwiaW1wb3J0IHsgVmFsaWRhdGFibGUgfSBmcm9tIFwiLi4vbW9kZWxzL3ZhbGlkYXRhYmxlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoaW5wdXQ6IFZhbGlkYXRhYmxlKSB7XHJcbiAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gIGlmIChpbnB1dC5yZXF1aXJlZClcclxuICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIGlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuICBpZiAoaW5wdXQubWluTGVuZ3RoICE9IG51bGwgJiYgdHlwZW9mIGlucHV0LnZhbHVlID09IFwic3RyaW5nXCIpXHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPj0gaW5wdXQubWluTGVuZ3RoO1xyXG4gIGlmIChpbnB1dC5tYXhMZW5ndGggIT0gbnVsbCAmJiB0eXBlb2YgaW5wdXQudmFsdWUgPT0gXCJzdHJpbmdcIilcclxuICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIGlucHV0LnZhbHVlLmxlbmd0aCA8PSBpbnB1dC5tYXhMZW5ndGg7XHJcbiAgaWYgKGlucHV0Lm1pbiAhPSBudWxsICYmIHR5cGVvZiBpbnB1dC52YWx1ZSA9PSBcIm51bWJlclwiKVxyXG4gICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgaW5wdXQudmFsdWUgPj0gaW5wdXQubWluO1xyXG4gIGlmIChpbnB1dC5tYXggIT0gbnVsbCAmJiB0eXBlb2YgaW5wdXQudmFsdWUgPT0gXCJudW1iZXJcIilcclxuICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIGlucHV0LnZhbHVlIDw9IGlucHV0Lm1heDtcclxuICByZXR1cm4gaXNWYWxpZDtcclxufVxyXG4iLCJpbXBvcnQgeyBTdGF0dXMgfSBmcm9tIFwiLi9zdGF0dXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxyXG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgc3RhdHVzOiBTdGF0dXNcclxuICApIHt9XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gU3RhdHVzIHtcclxuICBJc19Eb2luZyA9IFwiSVNfRE9JTkdcIixcclxuICBEb25lID0gXCJET05FXCIsXHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL21vZGVscy9wcm9qZWN0XCI7XHJcbmltcG9ydCB7IFN0YXR1cyB9IGZyb20gXCIuL21vZGVscy9zdGF0dXNcIjtcclxuXHJcbnR5cGUgTGlzdGVuZXI8VD4gPSAoaXRlbXM6IFRbXSkgPT4gdm9pZDtcclxuXHJcbmNsYXNzIFN1cGVyU3RhdGU8VD4ge1xyXG4gIHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcbiAgYWRkTGlzdGVuZXIobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pIHtcclxuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhdGUgZXh0ZW5kcyBTdXBlclN0YXRlPFByb2plY3Q+IHtcclxuICBwcml2YXRlIHByb2plY3RzOiBQcm9qZWN0W10gPSBbXTtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogU3RhdGU7XHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcbiAgICBpZiAodGhpcy5pbnN0YW5jZSkgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICB0aGlzLmluc3RhbmNlID0gbmV3IFN0YXRlKCk7XHJcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIGFkZFByb2plY3QodGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZykge1xyXG4gICAgY29uc3QgcHJvamVjdCA9IG5ldyBQcm9qZWN0KHRpdGxlLCBkZXNjcmlwdGlvbiwgU3RhdHVzLklzX0RvaW5nKTtcclxuICAgIHRoaXMucHJvamVjdHMucHVzaChwcm9qZWN0KTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgbW92ZVByb2plY3QodGl0bGU6IHN0cmluZywgbmV3U3RhdHVzOiBTdGF0dXMpIHtcclxuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RzLmZpbmQoKHByb2plY3QpID0+IHByb2plY3QudGl0bGUgPT0gdGl0bGUpO1xyXG4gICAgaWYgKHByb2plY3QgJiYgcHJvamVjdC5zdGF0dXMgIT09IG5ld1N0YXR1cykge1xyXG4gICAgICBwcm9qZWN0LnN0YXR1cyA9IG5ld1N0YXR1cztcclxuICAgICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTGlzdGVuZXJzKCkge1xyXG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycykgbGlzdGVuZXIoWy4uLnRoaXMucHJvamVjdHNdKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnNvbGUubG9nKFwiRVhQT1JURUQhXCIpO1xyXG5leHBvcnQgY29uc3Qgc3RhdGUgPSBTdGF0ZS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuLypcclxuICBIb3cgb2Z0ZW4gZG9lcyBpdCBydW4/XHJcbiAgT25lIHBlciBpbXBvcnQgc3RhdGVtZW50IG9yIG9uY2UgZm9yIHRoZSBlbnRpcmUgYXBwPyA8LS0tLS0tLS0tLS0tICoqXHJcbiAgSXQgcnVucyBvbmNlLCB3aGVuIHRoZSBmaWxlIGlzIGltcG9ydGVkIGZvciB0aGUgZmlyc3QgdGltZSBieSBhbnkgb3RoZXIgZmlsZS5cclxuICBJZiBhbm90aGVyIGZpbGUgdGhlbiBpbXBvcnRzIHRoYXQgc2FtZSBmaWxlIGFnYWluLCBpdCBkb2VzIG5vdCBydW4gYWdhaW4uIDwtLS0tLS0tLS0gKipcclxuKi9cclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IEF1dG9CaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvYXV0b2JpbmRcIjtcclxuaW1wb3J0IHsgVmFsaWRhdGFibGUgfSBmcm9tIFwiLi4vbW9kZWxzL3ZhbGlkYXRhYmxlXCI7XHJcbmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSBcIi4uL3V0aWxzL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHsgc3RhdGUgfSBmcm9tIFwiLi4vc3RhdGVcIjtcclxuXHJcbi8qXHJcbiAgLi4uIHlvdSBjYW4gYnVuZGxlIGltcG9ydHMuXHJcbiAgLi4uIGdyb3VwIHRoYXQgYWxsIGludG8gb25lIG9iamVjdCBcclxuICBpbXBvcnQgKiBhcyAoYW55IGFsaWFzIG9mIHlvdXIgY2hvaWNlKSBcclxuICAuLi4gdXNlIGl0IGxpa2UgYW4gb2JqZWN0ICAgXHJcblxyXG4gIGltcG9ydCB7IHggYXMgU29tZXRoaW5nIH0gZnJvbSAuLi4gIFxyXG4gIC4uLiBkaWZmZXJlbnQgbmFtZSBpbiB0aGlzIGZpbGVcclxuICBcclxuICBuYW1lZCBleHBvcnQgKGJlY3Vhc2Ugd2UgaW1wb3J0ZWQgYnkgbmFtZSlcclxuXHJcbiAgZGVmYXVsdCBleHBvcnRzXHJcbiAgLi4uIG9ubHkgaGF2ZSBvbmUgZGVmYXVsdCBleHBvcnQgcGVyIGZpbGUuXHJcbiAgaW1wb3J0IHlvdXIgZGVmYXVsdCBzaW1wbHkgYnkgY2hvb3NpbmcgYW55IG5hbWUgb2YgeW91ciBjaG9pY2VcclxuXHJcbiAgaW1wb3J0IHNvbXRoaW5nIGZyb20gLi4uXHJcbiovXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+IHtcclxuICBmb3JtRWxlbWVudDogSFRNTEZvcm1FbGVtZW50O1xyXG4gIHRpdGxlRWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICBkZXNjcmlwdGlvbkVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoXCJwcm9qZWN0LWlucHV0XCIsIFwiYXBwXCIsIHRydWUsIFwidXNlci1pbnB1dFwiKTtcclxuICAgIHRoaXMudGl0bGVFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI3RpdGxlXCJcclxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNkZXNjcmlwdGlvblwiXHJcbiAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIikhIGFzIEhUTUxGb3JtRWxlbWVudDtcclxuICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgfVxyXG5cclxuICBAQXV0b0JpbmRcclxuICBjb25maWd1cmUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCgpIHt9XHJcblxyXG4gIHByaXZhdGUgY2xlYXJGb3JtKCkge1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnYXRoZXJVc2VySW5wdXQoKTogW3N0cmluZywgc3RyaW5nXSB8IHZvaWQge1xyXG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLnRpdGxlRWxlbWVudC52YWx1ZTtcclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5kZXNjcmlwdGlvbkVsZW1lbnQudmFsdWU7XHJcblxyXG4gICAgY29uc3QgdGl0bGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcbiAgICAgIHZhbHVlOiB0aXRsZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbkxlbmd0aDogOCxcclxuICAgICAgbWF4TGVuZ3RoOiA4MCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZGVzY3JpcHRpb25WYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcbiAgICAgIHZhbHVlOiBkZXNjcmlwdGlvbixcclxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxyXG4gICAgICBtaW5MZW5ndGg6IDgsXHJcbiAgICAgIG1heExlbmd0aDogODAwLFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAodmFsaWRhdGUodGl0bGVWYWxpZGF0YWJsZSkgJiYgdmFsaWRhdGUoZGVzY3JpcHRpb25WYWxpZGF0YWJsZSkpXHJcbiAgICAgIHJldHVybiBbdGl0bGUsIGRlc2NyaXB0aW9uXTtcclxuICAgIGVsc2UgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdWJtaXRIYW5kbGVyKGV2ZW50OiBFdmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICBjb25zdCBbdGl0bGUsIGRlc2NyaXB0aW9uXSA9IGlucHV0O1xyXG4gICAgICBzdGF0ZS5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjcmlwdGlvbik7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLnRpdGxlRWxlbWVudC52YWx1ZSk7XHJcbiAgICB0aGlzLmNsZWFyRm9ybSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSBcIi4uL21vZGVscy9kcmFnLWRyb3BcIjtcclxuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG5pbXBvcnQgeyBBdXRvQmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG9iaW5kXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdEl0ZW1cclxuICBleHRlbmRzIENvbXBvbmVudDxIVE1MVUxpc3RFbGVtZW50LCBIVE1MTElFbGVtZW50PlxyXG4gIGltcGxlbWVudHMgRHJhZ2dhYmxlXHJcbntcclxuICBwcml2YXRlIHByb2plY3Q6IFByb2plY3Q7XHJcbiAgY29uc3RydWN0b3IoaG9zdElkOiBzdHJpbmcsIHByb2plY3Q6IFByb2plY3QpIHtcclxuICAgIHN1cGVyKFwic2luZ2xlLXByb2plY3RcIiwgaG9zdElkLCBmYWxzZSk7XHJcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gIH1cclxuICBAQXV0b0JpbmRcclxuICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgdGhpcy5wcm9qZWN0LnRpdGxlKTtcclxuICAgIC8vIC4uLiBob3cgdGhlIGN1cnNvciB3aWxsIGxvb2sgbGlrZS5cclxuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiO1xyXG4gIH1cclxuXHJcbiAgZHJhZ0VuZEhhbmRsZXIoXzogRHJhZ0V2ZW50KSB7fVxyXG5cclxuICBjb25maWd1cmUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCB0aGlzLmRyYWdTdGFydEhhbmRsZXIpO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIHRoaXMuZHJhZ0VuZEhhbmRsZXIpO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QudGl0bGU7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImgzXCIpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5kZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHJlbmRlckNvbnRlbnQoKSB7fVxyXG59XHJcbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBEcmFnVGFyZ2V0IH0gZnJvbSBcIi4uL21vZGVscy9kcmFnLWRyb3BcIjtcclxuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG5pbXBvcnQgeyBTdGF0dXMgfSBmcm9tIFwiLi4vbW9kZWxzL3N0YXR1c1wiO1xyXG5pbXBvcnQgeyBBdXRvQmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG9iaW5kXCI7XHJcbmltcG9ydCB7IHN0YXRlIH0gZnJvbSBcIi4uL3N0YXRlXCI7XHJcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSBcIi4vcHJvamVjdC1pdGVtXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdExpc3RcclxuICBleHRlbmRzIENvbXBvbmVudDxIVE1MRGl2RWxlbWVudCwgSFRNTEVsZW1lbnQ+XHJcbiAgaW1wbGVtZW50cyBEcmFnVGFyZ2V0XHJcbntcclxuICBhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdHlwZTogU3RhdHVzKSB7XHJcbiAgICBzdXBlcihcInByb2plY3QtbGlzdFwiLCBcImFwcFwiLCBmYWxzZSwgYCR7dHlwZX0tcHJvamVjdHNgKTtcclxuICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gIH1cclxuICBAQXV0b0JpbmRcclxuICBkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2ZlciAmJiBldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT0gXCJ0ZXh0L3BsYWluXCIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgbGlzdEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcInVsXCIpITtcclxuICAgICAgbGlzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImRyb3BwYWJsZVwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgQEF1dG9CaW5kXHJcbiAgZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgY29uc3QgdGl0bGUgPSBldmVudC5kYXRhVHJhbnNmZXIhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpO1xyXG4gICAgc3RhdGUubW92ZVByb2plY3QoXHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICB0aGlzLnR5cGUgPT0gU3RhdHVzLkRvbmUgPyBTdGF0dXMuSXNfRG9pbmcgOiBTdGF0dXMuRG9uZVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIEBBdXRvQmluZFxyXG4gIGRyYWdMZWF2ZUhhbmRsZXIoXzogRHJhZ0V2ZW50KSB7XHJcbiAgICBjb25zdCBsaXN0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidWxcIikhO1xyXG4gICAgbGlzdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImRyb3BwYWJsZVwiKTtcclxuICB9XHJcblxyXG4gIGNvbmZpZ3VyZSgpIHtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgdGhpcy5kcmFnT3ZlckhhbmRsZXIpO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIHRoaXMuZHJvcEhhbmRsZXIpO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgdGhpcy5kcmFnTGVhdmVIYW5kbGVyKTtcclxuXHJcbiAgICBzdGF0ZS5hZGRMaXN0ZW5lcigocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xyXG4gICAgICBjb25zdCByZWxldmFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKChwcm9qZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBTdGF0dXMuRG9uZSkgcmV0dXJuIHByb2plY3Quc3RhdHVzID09IFN0YXR1cy5Eb25lO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIHByb2plY3Quc3RhdHVzID09IFN0YXR1cy5Jc19Eb2luZztcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IHJlbGV2YW50UHJvamVjdHM7XHJcbiAgICAgIHRoaXMucmVuZGVyUHJvamVjdHMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCgpIHtcclxuICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGA7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcInVsXCIpIS5pZCA9IGxpc3RJZDtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIikhLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy50eXBlLnRvVXBwZXJDYXNlKCkgKyBcIiBQcm9qZWN0cyAgXCI7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbmRlclByb2plY3RzKCkge1xyXG4gICAgY29uc3QgbGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YFxyXG4gICAgKSEgYXMgSFRNTFVMaXN0RWxlbWVudDtcclxuICAgIGxpc3RJdGVtcy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgZm9yIChjb25zdCBwcm9qZWN0SXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcclxuICAgICAgbmV3IFByb2plY3RJdGVtKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidWxcIikhLmlkLCBwcm9qZWN0SXRlbSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3RJbnB1dCB9IGZyb20gXCIuL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dFwiO1xuaW1wb3J0IHsgUHJvamVjdExpc3QgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtbGlzdFwiO1xuaW1wb3J0IHsgU3RhdHVzIH0gZnJvbSBcIi4vbW9kZWxzL3N0YXR1c1wiO1xuXG5uZXcgUHJvamVjdElucHV0KCk7XG5uZXcgUHJvamVjdExpc3QoU3RhdHVzLklzX0RvaW5nKTtcbiJdLCJuYW1lcyI6WyJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInRlbXBsYXRlSWQiLCJob3N0RWxlbWVudElkIiwiaW5zZXJ0QXRTdGFydCIsIm5ld0VsZW1lbnRJZCIsInRoaXMiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaG9zdEVsZW1lbnQiLCJpbXBvcnRlZE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImlkIiwiYXR0YWNoIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiQXV0b0JpbmQiLCJfMSIsIl8yIiwiZGVzY3JpcHRvciIsInZhbHVlIiwib3JpZ2luYWxNZXRob2QiLCJjb25maWd1cmFibGUiLCJnZXQiLCJiaW5kIiwidmFsaWRhdGUiLCJpbnB1dCIsImlzVmFsaWQiLCJyZXF1aXJlZCIsInRvU3RyaW5nIiwidHJpbSIsImxlbmd0aCIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsIm1pbiIsIm1heCIsIlByb2plY3QiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic3RhdHVzIiwiU3RhdHVzIiwiU3VwZXJTdGF0ZSIsImxpc3RlbmVycyIsImFkZExpc3RlbmVyIiwibGlzdGVuZXJGbiIsInB1c2giLCJTdGF0ZSIsInN1cGVyIiwicHJvamVjdHMiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiYWRkUHJvamVjdCIsInByb2plY3QiLCJJc19Eb2luZyIsInVwZGF0ZUxpc3RlbmVycyIsIm1vdmVQcm9qZWN0IiwibmV3U3RhdHVzIiwiZmluZCIsImxpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsInN0YXRlIiwiUHJvamVjdElucHV0IiwidGl0bGVFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImRlc2NyaXB0aW9uRWxlbWVudCIsImZvcm1FbGVtZW50IiwiY29uZmlndXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1Ym1pdEhhbmRsZXIiLCJyZW5kZXJDb250ZW50IiwiY2xlYXJGb3JtIiwicmVzZXQiLCJnYXRoZXJVc2VySW5wdXQiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIkFycmF5IiwiaXNBcnJheSIsIlByb2plY3RJdGVtIiwiaG9zdElkIiwiZHJhZ1N0YXJ0SGFuZGxlciIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiZHJhZ0VuZEhhbmRsZXIiLCJfIiwidGV4dENvbnRlbnQiLCJQcm9qZWN0TGlzdCIsInR5cGUiLCJhc3NpZ25lZFByb2plY3RzIiwiZHJhZ092ZXJIYW5kbGVyIiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJkcm9wSGFuZGxlciIsImdldERhdGEiLCJEb25lIiwiZHJhZ0xlYXZlSGFuZGxlciIsInJlbW92ZSIsInJlbGV2YW50UHJvamVjdHMiLCJmaWx0ZXIiLCJyZW5kZXJQcm9qZWN0cyIsImxpc3RJZCIsInRvVXBwZXJDYXNlIiwiaW5uZXJIVE1MIiwicHJvamVjdEl0ZW0iXSwic291cmNlUm9vdCI6IiJ9